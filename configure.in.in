## SCR agent configure.in.in -*- autoconf -*-

## initialize
@YAST2-INIT-COMMON@
@YAST2-INIT-PROGRAM@

# FIXME: put this to devtools, fix dependencies in core
AGENT_LIBADD='dnl
 $(libdir)/libscr.la dnl
 $(libdir)/libycp.la dnl
 $(libdir)/liby2.la dnl
 ${Y2UTIL_LIBS}'

## some common checks
@YAST2-CHECKS-COMMON@
@YAST2-CHECKS-PROGRAM@

yast_found_hwinfo=no
AC_CHECK_HEADER([hd.h],[yast_found_hwinfo=yes])
if test "$yast_found_hwinfo" = "no"; then
  AC_MSG_ERROR([Headers for hwinfo are missing. Please install the package hwinfo-devel.])
fi

AH_TEMPLATE([HAVE_DRIVER_MODULE], [Define if s_hd_t.driver_module exists])
HWINFO_VERSION=`pkg-config --print-errors --modversion hwinfo`
if test -z "$HWINFO_VERSION"; then
  HWINFO_VERSION=0.0
fi
HWINFO_VERSION_MAJOR=`echo $HWINFO_VERSION | sed 's/\..*//'`
HWINFO_VERSION_MINOR=`echo $HWINFO_VERSION | sed 's/.*\.//'`
if test "$HWINFO_VERSION_MAJOR" -eq 13 -a "$HWINFO_VERSION_MINOR" -ge 2; then
  AC_DEFINE([HAVE_DRIVER_MODULE], 1)
fi

## and generate the output
@YAST2-OUTPUT@
